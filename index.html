<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>SchrÃ¶dinger'in Yolu - Neon Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600;900&family=Courier+Prime:wght@400;700&family=Orbitron:wght@600;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">


</head>

<body>

    <div id="rotate-warning">
        <i class="fa-solid fa-rotate text-6xl mb-4"></i>
        <p class="text-xl font-bold">LÃœTFEN CÄ°HAZI YAN Ã‡EVÄ°RÄ°N</p>
    </div>

    <div class="film-grain"></div>
    <canvas id="gameCanvas"></canvas>

    <div id="left-zone" class="control-zone"><i class="fa-solid fa-arrow-up"></i></div>
    <div id="right-zone" class="control-zone"><i class="fa-solid fa-repeat"></i></div>

    <div id="ui-layer">
        <div class="score-container">
            <div id="score-display" class="text-4xl font-black text-gray-500 font-mono">00000</div>
            <div id="active-buffs-display" class="active-buffs"></div>
            <div id="high-score" class="text-sm font-bold text-gray-700 mt-1 font-mono">HI: 00000</div>
            <div id="lives-display" class="text-xl font-bold text-red-500 mt-1 font-mono text-right hidden">â¤ï¸ x 0</div>
        </div>
        <div id="game-message"
            class="absolute top-1/3 left-1/2 transform -translate-x-1/2 text-center w-full opacity-0 transition-opacity duration-500">
            <span
                class="text-xl font-bold text-white bg-black/70 px-6 py-2 border-l-4 border-white tracking-widest font-mono">HIZLANIYOR...</span>
        </div>
    </div>

    <div id="toast-container"></div>

    <div id="start-screen" class="screen">
        <div id="menu-background-layer"></div>

        <!-- INTERACTIVE PET ZONE -->
        <div id="pet-zone" class="pet-container">
            <canvas id="pet-canvas" width="200" height="200"></canvas>
            <div id="pet-tooltip" class="pet-tooltip">
                <i class="fa-solid fa-hand-pointer"></i> Bana dokun!
            </div>
            <div id="pet-mood-indicator" class="pet-mood">ğŸ˜º</div>
        </div>

        <div class="title-frame">
            <h1 class="font-black text-white tracking-tighter text-center main-title">SCHRÃ–DINGER</h1>
            <p class="text-gray-300 font-mono tracking-[0.5em] uppercase sub-title">- VÄ°YANA 1935 -</p>
        </div>

        <input type="text" id="player-name" value="KEDI" maxlength="8">

        <!-- LOADOUT UI -->
        <div class="loadout-container">
            <div class="loadout-item" id="loadout-shield" onclick="toggleLoadout('shield')">
                <img src="assets/shop_icon_shield.webp">
                <div class="loadout-count" id="count-shield">0</div>
            </div>
            <div class="loadout-item" id="loadout-wormhole" onclick="toggleLoadout('wormhole')">
                <img src="assets/shop_icon_wormhole.webp">
                <div class="loadout-count" id="count-wormhole">0</div>
            </div>
            <div class="loadout-item" id="loadout-booster" onclick="toggleLoadout('booster')">
                <img src="assets/shop_icon_booster.webp">
                <div class="loadout-count" id="count-booster">0</div>
            </div>
        </div>

        <div class="difficulty-container">
            <button class="btn-difficulty" onclick="setDifficulty('EASY')">KOLAY</button>
            <button class="btn-difficulty active" onclick="setDifficulty('NORMAL')">NORMAL</button>
            <button class="btn-difficulty" onclick="setDifficulty('HARD')">ZOR</button>
            <button class="btn-difficulty" onclick="setDifficulty('EXTREME')"
                style="border-color: #FF0000; color: #FF0000; box-shadow: 0 0 10px #FF0000;">EXTREME</button>
        </div>

        <div class="tutorial-row">
            <div class="tut-item">
                <div class="tut-icon"><i class="fa-solid fa-arrow-up"></i></div>
                <div class="tut-desc">ZIPLA</div>
            </div>
            <div class="tut-item">
                <div class="tut-icon"><i class="fa-solid fa-repeat"></i></div>
                <div class="tut-desc">DÃ–NÃœÅTÃœR</div>
            </div>
        </div>

        <div class="flex flex-col gap-3">
            <button class="btn" onclick="startGame()">DENEYÄ° BAÅLAT</button>
            <button class="btn btn-secondary" style="border-color: #39FF14; color: #39FF14;" onclick="openShop()">MAÄAZA
                âš›</button>
            <div class="flex gap-2">
                <button class="btn btn-secondary flex-1" onclick="openStory()">DOSYA</button>
                <button class="btn btn-secondary flex-1" onclick="openScoreboard()">SKORLAR</button>
            </div>
            <button class="btn btn-secondary w-full mt-2" onclick="openBadges()">ROZETLER ğŸ–ï¸</button>
            <button class="btn btn-secondary w-full mt-2" onclick="openSettings()">AYARLAR âš™ï¸</button>

            <!-- DEV TOOLS -->
            <div class="flex gap-2 justify-center mt-6 opacity-40 hover:opacity-100 transition-opacity">
                <button
                    class="text-[10px] text-red-500 font-mono border border-red-900 px-2 py-1 rounded hover:bg-red-900"
                    onclick="resetProgress()">âš ï¸ SIFIRLA</button>
                <button
                    class="text-[10px] text-green-500 font-mono border border-green-900 px-2 py-1 rounded hover:bg-green-900"
                    onclick="addDebugAtoms()">âš› ATOM EKLE</button>
            </div>
        </div>
    </div>

    <!-- MAÄAZA EKRANI -->
    <div id="shop-screen" class="screen hidden"
        style="justify-content: flex-start; overflow-y: auto; display: block; padding: 0;">
        <i class="fas fa-paw paw-close-btn" onclick="closeShop()"></i>
        <div class="shop-scroll-wrapper"
            style="min-height: 100vh; padding: 40px 20px; display: flex; flex-direction: column; align-items: center;">
            <h2 class="text-2xl text-white font-bold mb-6 tracking-widest border-b border-gray-600 pb-2 font-mono">
                MAÄAZA
            </h2>

            <div class="shop-balance">
                <span>âš› <span id="atom-display">0</span></span>
            </div>

            <h2
                class="text-xl text-white font-bold mb-4 tracking-widest border-b border-gray-600 pb-2 font-mono w-full max-w-[800px]">
                GÃœÃ‡LENDÄ°RÄ°CÄ°LER</h2>

            <div class="shop-items-container">
                <!-- CAN -->
                <div class="shop-item" onclick="buyItem('LIFE')">
                    <div class="item-icon"><img src="assets/shop_icon_life.webp" class="shop-icon-img" alt="Can"></div>
                    <div class="item-info">
                        <div class="item-title">EKSTRA CAN</div>
                        <div class="item-desc">Ã–ldÃ¼ÄŸÃ¼nde bir ÅŸans daha verir.</div>
                        <div class="text-xs text-gray-500 font-mono mt-1">Stok: <span id="stock-life">0</span></div>
                    </div>
                    <button class="buy-btn" id="btn-buy-life">500 âš›</button>
                </div>

                <!-- KALKAN -->
                <div class="shop-item" onclick="buyItem('SHIELD')">
                    <div class="item-icon"><img src="assets/shop_icon_shield.webp" class="shop-icon-img" alt="Kalkan">
                    </div>
                    <div class="item-info">
                        <div class="item-title">KUANTUM KALKANI</div>
                        <div class="item-desc">Ä°lk Ã§arpÄ±ÅŸmayÄ± yok sayar.</div>
                        <div class="text-xs text-gray-500 font-mono mt-1">Stok: <span id="stock-shield">0</span></div>
                    </div>
                    <button class="buy-btn" id="btn-buy-shield">1000 âš›</button>
                </div>

                <!-- SOLUCAN DELÄ°ÄÄ° -->
                <div class="shop-item" onclick="buyItem('WORMHOLE')">
                    <div class="item-icon"><img src="assets/shop_icon_wormhole.webp" class="shop-icon-img"
                            alt="Solucan">
                    </div>
                    <div class="item-info">
                        <div class="item-title">SOLUCAN DELÄ°ÄÄ°</div>
                        <div class="item-desc">1000 Puan ileriden baÅŸlatÄ±r.</div>
                        <div class="text-xs text-gray-500 font-mono mt-1">Stok: <span id="stock-wormhole">0</span></div>
                    </div>
                    <button class="buy-btn" id="btn-buy-wormhole">300 âš›</button>
                </div>

                <!-- BOOST -->
                <div class="shop-item" onclick="buyItem('BOOSTER')">
                    <div class="item-icon"><img src="assets/shop_icon_booster.webp" class="shop-icon-img" alt="Booster">
                    </div>
                    <div class="item-info">
                        <div class="item-title">Ã‡Ä°FTE KAZANÃ‡</div>
                        <div class="item-desc">Bir sonraki tur 2x Atom kazandÄ±rÄ±r.</div>
                        <div class="text-xs text-gray-500 font-mono mt-1">Stok: <span id="stock-booster">0</span></div>
                    </div>
                    <button class="buy-btn" id="btn-buy-booster">200 âš›</button>
                </div>
            </div>

            <h2 class="text-xl text-white font-bold mb-4 mt-8 tracking-widest border-b border-gray-600 pb-2 font-mono">
                EVRENLER</h2>
            <div class="shop-items-container" id="themes-list">
                <!-- Temalar JS ile buraya gelecek -->
            </div>

            <h2 class="text-xl text-white font-bold mb-4 mt-8 tracking-widest border-b border-gray-600 pb-2 font-mono">
                AKSESUARLAR</h2>
            <div class="shop-items-container" id="cosmetics-list">
                <!-- Aksesuarlar JS ile buraya gelecek -->
            </div>

            <div class="text-gray-500 text-xs font-mono mt-6 text-center mb-8">BAÅLANGIÃ‡ EKRANINDAN SEÃ‡EREK
                KULLANABÄ°LÄ°RSÄ°NÄ°Z</div>

        </div> <!-- End Wrapper -->
    </div>

    <!-- SKOR TABLOSU EKRANI -->
    <div id="scoreboard-screen" class="screen hidden" style="justify-content: flex-start; padding-top: 50px;">
        <i class="fas fa-paw paw-close-btn" onclick="closeScoreboard()"></i>
        <h2 class="text-2xl text-white font-bold mb-6 tracking-widest border-b border-gray-600 pb-2 font-mono">LÄ°DER
            TABLOSU</h2>

        <div class="tab-container">
            <div class="tab-btn" onclick="showLeaderboardTab('EASY')" id="tab-EASY">KOLAY</div>
            <div class="tab-btn active" onclick="showLeaderboardTab('NORMAL')" id="tab-NORMAL">NORMAL</div>
            <div class="tab-btn" onclick="showLeaderboardTab('HARD')" id="tab-HARD">ZOR</div>
            <div class="tab-btn" style="color: #ff0000; border-color: #ff0000;" onclick="showLeaderboardTab('EXTREME')"
                id="tab-EXTREME">EXTREME</div>
        </div>

        <div class="story-container" id="leaderboard-list">
            <!-- Skorlar buraya JS ile gelecek -->
        </div>

    </div>

    <!-- ROZETLER EKRANI -->
    <!-- ROZETLER EKRANI -->
    <div id="badges-screen" class="screen hidden"
        style="justify-content: flex-start; padding-top: 20px; overflow: hidden;">
        <i class="fas fa-paw paw-close-btn" onclick="closeBadges()"></i>
        <h2 class="text-xl text-white font-bold mb-2 tracking-widest border-b border-gray-600 pb-2 font-mono"
            style="flex-shrink: 0;">
            GÃ–REVLER & ROZETLER
        </h2>

        <div class="story-container"
            style="width: 95%; max-width: 800px; display: flex; flex-direction: column; flex-grow: 1; min-height: 0; margin-bottom: 10px;">

            <!-- Badges Grid -->
            <!-- minmax(300px) -> minmax(150px) allows 2 columns on mobile -->
            <div id="badges-list" class="shop-items-container"
                style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); overflow-y: auto; padding-right: 5px; flex-grow: 1;">
                <!-- Badges will be populated by JS -->
            </div>
        </div>

    </div>

    <!-- AYARLAR EKRANI -->
    <div id="settings-screen" class="screen hidden" style="justify-content: center; align-items: center;">
        <i class="fas fa-paw paw-close-btn" onclick="closeSettings()"></i>
        <h2 class="text-2xl text-white font-bold mb-6 tracking-widest border-b border-gray-600 pb-2 font-mono">AYARLAR
        </h2>

        <div class="flex flex-col gap-6 w-full max-w-sm px-4">
            <!-- Music Volume Control -->
            <div class="flex flex-col gap-2">
                <label class="text-[#39FF14] font-mono font-bold text-lg">MÃœZÄ°K: <span
                        id="music-vol-display">30%</span></label>
                <input type="range" id="music-volume-slider" min="0" max="100" value="30"
                    class="accent-[#39FF14] w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                    oninput="updateMusicVolume(this.value)">
            </div>

            <!-- SFX Volume Control -->
            <div class="flex flex-col gap-2">
                <label class="text-[#39FF14] font-mono font-bold text-lg">SES EFEKTLERÄ°: <span
                        id="sfx-vol-display">30%</span></label>
                <input type="range" id="sfx-volume-slider" min="0" max="100" value="30"
                    class="accent-[#39FF14] w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                    oninput="updateSfxVolume(this.value)">
            </div>

            <!-- Mute Toggle -->
            <div class="flex items-center justify-between border border-gray-700 p-4 rounded bg-black/50">
                <span class="text-white font-mono text-lg">SESÄ° KAPAT (MUTE)</span>
                <button id="mute-btn" class="btn-secondary py-2 px-4" onclick="toggleMute()">AÃ‡IK</button>
            </div>
        </div>

    </div>

    <div id="story-screen" class="screen hidden"
        style="justify-content: flex-start; padding-top: 20px; overflow-y: auto;">
        <i class="fas fa-paw paw-close-btn" onclick="closeStory()"></i>
        <h2 class="text-2xl text-white font-bold mb-4 tracking-widest border-b border-gray-600 pb-2 font-mono">DOSYA
            #1935</h2>


        <!-- SCENE 1 -->
        <div class="story-scene active" id="scene-1">
            <div class="story-img-container"><img src="assets/story_panel_1.webp" class="story-img"></div>
            <div class="story-caption">
                <span class="text-[#39FF14] font-bold">1935, VÄ°YANA.</span><br>
                ProfesÃ¶r Erwin SchrÃ¶dinger, kuantum mekaniÄŸinin tuhaflÄ±ÄŸÄ±nÄ± kanÄ±tlamak istedi.
                <br><br>
                SoÄŸuk, metal bir kutu. Radyoaktif bir atom. Ve masum bir kedi...
            </div>
        </div>

        <!-- SCENE 2 -->
        <div class="story-scene" id="scene-2">
            <div class="story-img-container"><img src="assets/story_panel_2.webp" class="story-img"></div>
            <div class="story-caption">
                <span class="text-[#39FF14] font-bold">DENEK.</span><br>
                Kedi kutuya kondu. YanÄ±na zehirli bir gaz ÅŸiÅŸesi yerleÅŸtirildi.
                <br><br>
                Atom bozulursa ÅŸiÅŸe kÄ±rÄ±lacak. Bozulmazsa kedi yaÅŸayacak.
                Kaderi, %50 ihtimale baÄŸlÄ±ydÄ±.
            </div>
        </div>

        <!-- SCENE 3 -->
        <div class="story-scene" id="scene-3">
            <div class="story-img-container"><img src="assets/story_panel_3.webp" class="story-img"></div>
            <div class="story-caption">
                <span class="text-[#39FF14] font-bold">SÃœPERPOZÄ°SYON.</span><br>
                Kutu kapandÄ±. DÄ±ÅŸarÄ±dan bakÄ±ldÄ±ÄŸÄ±nda kedi artÄ±k ne canlÄ± ne de Ã¶lÃ¼ydÃ¼.
                <br><br>
                Evrenin dokusu yÄ±rtÄ±ldÄ±. VarlÄ±ÄŸÄ± hem iskelet hem de et arasÄ±nda gidip geliyordu.
            </div>
        </div>

        <!-- SCENE 4 -->
        <div class="story-scene" id="scene-4">
            <div class="story-img-container"><img src="assets/story_panel_4.webp" class="story-img"></div>
            <div class="story-caption">
                <span class="text-[#39FF14] font-bold">KIRILMA NOKTASI.</span><br>
                Ama kedi bir gÃ¶zlemci olmayÄ± reddetti!<br>
                Kendi kaderini kendi Ã¶lÃ§tÃ¼. Paradoks, kutunun sÄ±nÄ±rlarÄ±nÄ± aÅŸtÄ±.
                <br><br>
                Kutudan bÃ¼yÃ¼k bir enerji patlamasÄ±yla fÄ±rladÄ±.
            </div>
        </div>

        <!-- SCENE 5 -->
        <div class="story-scene" id="scene-5">
            <div class="story-img-container"><img src="assets/story_panel_5.webp" class="story-img"></div>
            <div class="story-caption">
                <span class="text-[#39FF14] font-bold">KAÃ‡IÅ.</span><br>
                Åimdi sonsuz bir kuantum tÃ¼nelinde, neon Ä±ÅŸÄ±klarÄ± altÄ±nda koÅŸuyor.
                <br><br>
                Durursa yok olacak. <span class="text-white font-bold">KOÅMAK ZORUNDA.</span>
            </div>
        </div>

        <div class="story-controls">
            <button class="btn btn-secondary" id="btn-prev-story" onclick="changeStoryPage(-1)">GERÄ°</button>
            <span class="text-white font-mono" id="story-page-num">1 / 5</span>
            <button class="btn" id="btn-next-story" onclick="changeStoryPage(1)">Ä°LERÄ°</button>
        </div>

    </div>

    <div id="game-over-screen" class="screen hidden" style="background: rgba(0,0,0,0.9);">
        <h2 class="text-4xl text-white font-black mb-2 tracking-tighter">DENEY SONLANDI</h2>
        <p id="death-reason" class="text-gray-400 font-mono text-sm mb-8 text-center px-4 max-w-md">...</p>

        <div class="text-6xl font-black text-white mb-2 font-mono" id="final-score">0000</div>
        <p class="text-gray-600 text-xs uppercase mb-2">SON SKOR</p>
        <p class="text-[#39FF14] text-xs uppercase mb-4 font-mono">+<span id="earned-atoms">0</span> ATOM KAZANDIN</p>

        <!-- QUICK LOADOUT UI -->
        <p class="text-gray-500 text-[10px] tracking-widest uppercase mb-2">HIZLI EKÄ°PMAN SEÃ‡Ä°MÄ°</p>
        <div class="loadout-container mb-6">
            <div class="loadout-item" id="quick-shield" onclick="toggleLoadout('shield')">
                <img src="assets/shop_icon_shield.webp">
                <div class="loadout-count" id="quick-count-shield">0</div>
            </div>
            <div class="loadout-item" id="quick-wormhole" onclick="toggleLoadout('wormhole')">
                <img src="assets/shop_icon_wormhole.webp">
                <div class="loadout-count" id="quick-count-wormhole">0</div>
            </div>
            <div class="loadout-item" id="quick-booster" onclick="toggleLoadout('booster')">
                <img src="assets/shop_icon_booster.webp">
                <div class="loadout-count" id="quick-count-booster">0</div>
            </div>
        </div>

        <button id="btn-revive" class="hidden btn" style="border: 2px solid red; color: red;"
            onclick="revivePlayer()">HAYATA DÃ–N (1 â¤ï¸)</button>
        <button class="btn" onclick="resetGame()">HEMEN BAÅLAT</button>
        <button class="text-gray-500 mt-4 text-xs uppercase hover:text-white font-mono" onclick="showMenu()">ANA
            MENÃœ</button>
    </div>

    <script src="game.js"></script>

</body>

</html>
